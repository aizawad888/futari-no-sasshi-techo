<header class="sticky top-0 bg-white border-b border-gray-200 z-50">
  <div class="flex items-center justify-between px-4 py-3 max-w-7xl mx-auto">
    
    <!-- 左側：戻るボタン -->
    <div class="w-10">
      <% if content_for?(:show_back_button) %>
        <%= link_to (content_for?(:back_path) ? yield(:back_path) : :back), class: "text-gray-700 hover:text-gray-900 transition" do %>
          <!-- Heroicons の arrow-left アイコン（Tailwind公式推奨） -->
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18" />
          </svg>
        <% end %>
      <% end %>
    </div>


    <!-- 中央：ページタイトル -->
    <h1 class="text-lg font-bold text-gray-900 flex-1 text-center">
      <%= content_for?(:page_title) ? yield(:page_title) : "ふたりのきっかけ帳" %>
    </h1>

    <!-- 右側：ログイン/ログアウト -->
    <nav class="flex items-center space-x-4 justify-end">
      <% if user_signed_in? %>
        <!-- ログイン中：ユーザー名とログアウトボタン -->
        <div class="hidden md:flex items-center space-x-4">
          <span class="text-sm text-gray-700"><%= current_user.name || current_user.email %></span>
          <%= link_to t('header.logout'), destroy_user_session_path, 
                      data: { turbo_method: :delete }, 
                      class: "text-sm text-blue-600 hover:text-blue-800 transition" %>
        </div>
        
        <!-- スマホ用：ハンバーガーメニュー（オプション） -->
        <div class="md:hidden">
          <button type="button" class="text-gray-700" id="mobile-menu-button">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
            </svg>
          </button>
        </div>
      <% else %>
        <!-- 未ログイン：ログインリンク -->
        <%= link_to t('header.login'), new_user_session_path, 
                    class: "text-sm text-blue-600 hover:text-blue-800 transition" %>
      <% end %>
    </nav>

  </div>

  <!-- スマホ用メニュー中身（オプション） -->
  <% if user_signed_in? %>
    <div id="mobile-menu" class="hidden md:hidden border-t border-gray-200 bg-white">
      <div class="px-4 py-3 space-y-2">
        <div class="text-sm text-gray-700"><%= current_user.name || current_user.email %></div>
        <%= link_to t('header.logout'), destroy_user_session_path, 
                    data: { turbo_method: :delete }, 
                    class: "block text-sm text-blue-600 hover:text-blue-800 transition" %>
      </div>
    </div>
  <% end %>
</header>