<% content_for(:page_title, t('notification_settings.show')) %>
<% content_for(:show_back_button, true) %>
<% content_for(:back_path, main_path) %>

<div class="container mx-auto px-4 py-8">
  ※アプリ内通知はOFFにできません

  <%= form_with url: notification_settings_path, method: :patch, local: true do %>
    <div class="space-y-6">

      <% @notification_settings.each do |setting| %>
        <div class="bg-white p-4 rounded-lg shadow space-y-3">
          <h3 class="font-bold text-lg">
            <%= t("notification_kinds.#{setting.notification_kind}") %>
          </h3>

          <% options =
            case setting.notification_kind
            when "new_post"
              [["すぐ通知", "immediate"], ["1日1回", "daily"]]
            when "weekly_summary"
              [["週1回", "weekly"]]
            when "post_unlocked", "anniversary"
              [["すぐ通知", "immediate"]]
            end
          %>

          <%= select_tag(
            "user_notification_settings[#{setting.id}][frequency]",
            options_for_select(
              [["通知しない", ""]] + options,
              setting.push_enabled ? setting.frequency : ""
            ),
            class: "form-select"
          ) %>

        </div>
      <% end %>

    </div>

    <div class="mt-6">
      <%= submit_tag "保存する",
                     class: "px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600" %>
    </div>
  <% end %>
</div>
